<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HealthApp - Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <div id="root"></div>
    </div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script>
        import React, { useState, useMemo } from 'react';
        import { User, Heart, MessageCircle, Plus, AlertTriangle, Calendar, Pill, Activity, TrendingUp, Brain, Target, FileText, Search } from 'lucide-react';

        const HealthAdvisorPro = () => {
        const [currentView, setCurrentView] = useState('dashboard');
        const [userProfile, setUserProfile] = useState({
            initials: '', age: '', gender: '', height: '', weight: '', bmi: '',
            ethnicity: '', occupation: '', familyHistory: '', smokingHistory: '',
            alcoholUse: '', exerciseFrequency: '', sleepHours: ''
        });
        
        const [medicalData, setMedicalData] = useState({
            conditions: [], medications: [], allergies: [], surgeries: [],
            symptoms: [], vitals: []
        });
        
        const [latestVitals, setLatestVitals] = useState({
            systolicBP: '', diastolicBP: '', heartRate: '', temperature: '',
            respiratoryRate: '', oxygenSat: '', bloodGlucose: '', hemoglobinA1C: '',
            totalCholesterol: '', ldlCholesterol: '', hdlCholesterol: '', triglycerides: '',
            creatinine: '', bun: '', gfr: '', albumin: '', hemoglobin: '', whiteBC: '',
            platelets: '', thyroidTSH: '', vitaminD: '', vitaminB12: ''
        });
        
        const [currentQuery, setCurrentQuery] = useState('');
        const [consultations, setConsultations] = useState([]);
        const [showAddForms, setShowAddForms] = useState({});

        // Comprehensive medical knowledge base with clinical decision support
        const medicalKnowledge = {
            cardiovascularRisk: {
            assessRisk: (profile, vitals) => {
                const age = parseInt(profile.age) || 0;
                const systolic = parseInt(vitals.systolicBP) || 0;
                const cholesterol = parseInt(vitals.totalCholesterol) || 0;
                const hdl = parseInt(vitals.hdlCholesterol) || 0;
                
                let riskScore = 0;
                let riskFactors = [];
                
                if (age > 65) { riskScore += 2; riskFactors.push('Age > 65'); }
                if (age > 45 && profile.gender === 'male') { riskScore += 1; riskFactors.push('Male > 45'); }
                if (age > 55 && profile.gender === 'female') { riskScore += 1; riskFactors.push('Female > 55'); }
                if (systolic >= 140) { riskScore += 2; riskFactors.push('Hypertension (SBP ≥140)'); }
                if (systolic >= 130) { riskScore += 1; riskFactors.push('Elevated BP (SBP 130-139)'); }
                if (cholesterol >= 240) { riskScore += 2; riskFactors.push('High cholesterol (≥240)'); }
                if (hdl < 40) { riskScore += 1; riskFactors.push('Low HDL (<40)'); }
                if (profile.smokingHistory === 'current') { riskScore += 2; riskFactors.push('Current smoker'); }
                if (profile.familyHistory?.includes('heart')) { riskScore += 1; riskFactors.push('Family history of heart disease'); }
                
                let riskLevel = 'Low';
                if (riskScore >= 6) riskLevel = 'High';
                else if (riskScore >= 3) riskLevel = 'Moderate';
                
                return { riskLevel, riskScore, riskFactors };
            }
            },
            
            diabeticRisk: {
            assessRisk: (profile, vitals) => {
                const bmi = parseFloat(profile.bmi) || 0;
                const a1c = parseFloat(vitals.hemoglobinA1C) || 0;
                const glucose = parseInt(vitals.bloodGlucose) || 0;
                const age = parseInt(profile.age) || 0;
                
                let riskFactors = [];
                let recommendations = [];
                
                if (a1c >= 6.5) {
                return {
                    status: 'Diabetes Diagnosis Criteria Met',
                    message: 'HbA1c ≥6.5% meets diagnostic criteria for diabetes. Immediate medical evaluation recommended.',
                    urgency: 'high'
                };
                } else if (a1c >= 5.7) {
                riskFactors.push(`Prediabetes (A1C: ${a1c}%)`);
                recommendations.push('Lifestyle modification program', 'Weight loss if overweight', 'Regular exercise');
                }
                
                if (bmi >= 30) riskFactors.push(`Obesity (BMI: ${bmi})`);
                if (age >= 45) riskFactors.push('Age ≥45');
                if (profile.familyHistory?.includes('diabetes')) riskFactors.push('Family history of diabetes');
                if (profile.ethnicity?.includes('hispanic') || profile.ethnicity?.includes('african') || profile.ethnicity?.includes('asian')) {
                riskFactors.push('High-risk ethnicity');
                }
                
                return { riskFactors, recommendations, status: 'Assessment Complete' };
            }
            },
            
            symptomAnalyzer: {
            analyze: (symptoms, vitals, conditions) => {
                const analyses = [];
                
                symptoms.forEach(symptom => {
                const desc = symptom.description.toLowerCase();
                let analysis = { symptom: symptom.description, possibleCauses: [], redFlags: [], recommendations: [] };
                
                if (desc.includes('chest pain') || desc.includes('chest pressure')) {
                    analysis.possibleCauses = [
                    'Cardiac: Angina, MI, pericarditis',
                    'Pulmonary: PE, pneumonia, pleuritis',
                    'GI: GERD, esophageal spasm',
                    'Musculoskeletal: Costochondritis, muscle strain'
                    ];
                    analysis.redFlags = [
                    'Crushing/squeezing pain',
                    'Radiation to arm/jaw',
                    'Shortness of breath',
                    'Sweating, nausea'
                    ];
                    analysis.recommendations = ['Immediate medical evaluation if red flags present', 'EKG and cardiac enzymes', 'Consider stress testing'];
                }
                
                if (desc.includes('headache')) {
                    analysis.possibleCauses = [
                    'Tension-type (90%): Stress, poor posture, eye strain',
                    'Migraine: Unilateral, throbbing, photophobia',
                    'Cluster: Severe, periorbital, seasonal pattern',
                    'Secondary: Hypertension, medication overuse, infection'
                    ];
                    analysis.redFlags = [
                    'Sudden severe "thunderclap" headache',
                    'Headache with fever and neck stiffness',
                    'New headache pattern after age 50',
                    'Headache with neurological deficits'
                    ];
                    analysis.recommendations = ['Headache diary', 'Identify triggers', 'Consider prophylactic treatment if >4/month'];
                }
                
                if (desc.includes('shortness of breath') || desc.includes('dyspnea')) {
                    analysis.possibleCauses = [
                    'Cardiac: Heart failure, arrhythmia, valvular disease',
                    'Pulmonary: Asthma, COPD, pneumonia, PE',
                    'Systemic: Anemia, thyroid disorders, deconditioning'
                    ];
                    analysis.redFlags = ['Orthopnea', 'Paroxysmal nocturnal dyspnea', 'Chest pain', 'Hemoptysis'];
                    analysis.recommendations = ['Echocardiogram', 'Chest X-ray', 'BNP/NT-proBNP', 'Pulmonary function tests'];
                }
                
                analyses.push(analysis);
                });
                
                return analyses;
            }
            }
        };

        // Calculate comprehensive health insights
        const healthInsights = useMemo(() => {
            const insights = {
            cardiovascularRisk: null,
            diabeticRisk: null,
            symptomAnalyses: [],
            overallAssessment: '',
            priorityRecommendations: []
            };
            
            if (userProfile.age && latestVitals.systolicBP) {
            insights.cardiovascularRisk = medicalKnowledge.cardiovascularRisk.assessRisk(userProfile, latestVitals);
            }
            
            if (userProfile.bmi || latestVitals.hemoglobinA1C) {
            insights.diabeticRisk = medicalKnowledge.diabeticRisk.assessRisk(userProfile, latestVitals);
            }
            
            if (medicalData.symptoms.length > 0) {
            insights.symptomAnalyses = medicalKnowledge.symptomAnalyzer.analyze(
                medicalData.symptoms, latestVitals, medicalData.conditions
            );
            }
            
            // Overall assessment
            let assessments = [];
            if (insights.cardiovascularRisk?.riskLevel === 'High') assessments.push('High cardiovascular risk detected');
            if (insights.diabeticRisk?.status?.includes('Diabetes')) assessments.push('Diabetes evaluation needed');
            if (insights.symptomAnalyses.some(s => s.redFlags.length > 0)) assessments.push('Symptoms requiring urgent evaluation');
            
            insights.overallAssessment = assessments.length > 0 ? assessments.join('. ') : 'Current data suggests stable health status';
            
            return insights;
        }, [userProfile, latestVitals, medicalData]);

        const handleProfileUpdate = (field, value) => {
            setUserProfile(prev => {
            const updated = { ...prev, [field]: value };
            if ((field === 'weight' || field === 'height') && updated.height && updated.weight) {
                const heightM = updated.height / 100;
                updated.bmi = (updated.weight / (heightM * heightM)).toFixed(1);
            }
            return updated;
            });
        };

        const addMedicalItem = (category, item) => {
            if (item.trim()) {
            setMedicalData(prev => ({
                ...prev,
                [category]: [...prev[category], {
                id: Date.now(),
                name: item.trim(),
                dateAdded: new Date().toLocaleDateString(),
                ...category === 'symptoms' && { severity: 'moderate', frequency: 'occasional' }
                }]
            }));
            }
        };

        const generateConsultation = () => {
            if (!currentQuery.trim()) return;
            
            const query = currentQuery.toLowerCase();
            let response = {
            question: currentQuery,
            clinicalAnalysis: '',
            differentialDiagnosis: [],
            recommendedTests: [],
            treatmentOptions: [],
            followUpGuidance: '',
            evidenceLevel: 'Clinical Guidelines',
            timestamp: new Date().toLocaleString()
            };
            
            // Intelligent analysis based on query content and patient data
            if (query.includes('blood pressure') || query.includes('hypertension')) {
            const bp = `${latestVitals.systolicBP}/${latestVitals.diastolicBP}`;
            const systolic = parseInt(latestVitals.systolicBP) || 0;
            
            response.clinicalAnalysis = `Blood pressure analysis: ${bp} mmHg. ` +
                (systolic >= 140 ? 'Stage 2 hypertension (≥140 mmHg)' :
                systolic >= 130 ? 'Stage 1 hypertension (130-139 mmHg)' :
                systolic >= 120 ? 'Elevated blood pressure (120-129 mmHg)' :
                'Normal blood pressure (<120 mmHg)') +
                `. Patient profile shows ${healthInsights.cardiovascularRisk?.riskLevel || 'undetermined'} cardiovascular risk.`;
            
            response.recommendedTests = ['24-hour ambulatory BP monitoring', 'Basic metabolic panel', 'Lipid panel', 'Urinalysis', 'ECG'];
            response.treatmentOptions = systolic >= 140 ? 
                ['ACE inhibitor or ARB', 'Thiazide diuretic', 'Calcium channel blocker', 'Lifestyle modifications'] :
                ['Lifestyle modifications', 'DASH diet', 'Regular exercise', 'Weight management'];
            response.followUpGuidance = 'Monitor BP weekly, reassess in 4-6 weeks, target <130/80 mmHg';
            }
            
            else if (query.includes('diabetes') || query.includes('blood sugar') || query.includes('a1c')) {
            const a1c = latestVitals.hemoglobinA1C;
            response.clinicalAnalysis = `Diabetes assessment: HbA1c ${a1c}%. ` +
                (a1c >= 6.5 ? 'Meets diagnostic criteria for diabetes mellitus' :
                a1c >= 5.7 ? 'Prediabetes range - high risk for progression' :
                'Normal glucose metabolism') +
                `. BMI: ${userProfile.bmi}, additional risk factors: ${healthInsights.diabeticRisk?.riskFactors?.join(', ') || 'none identified'}.`;
            
            response.recommendedTests = ['Fasting glucose', 'Oral glucose tolerance test', 'Lipid panel', 'Microalbumin', 'Diabetic eye exam'];
            response.treatmentOptions = a1c >= 6.5 ? 
                ['Metformin first-line', 'Lifestyle counseling', 'Diabetes education', 'Consider additional agents if A1c >7%'] :
                ['Lifestyle intervention program', 'Weight loss counseling', 'Exercise prescription'];
            response.followUpGuidance = 'Monitor A1c every 3-6 months, target <7% for most patients';
            }
            
            else if (query.includes('chest pain') || query.includes('heart')) {
            response.clinicalAnalysis = 'Chest pain evaluation requires systematic approach. Based on patient age, gender, and risk factors, ' +
                `cardiovascular risk is ${healthInsights.cardiovascularRisk?.riskLevel || 'undetermined'}. ` +
                'Consider cardiac, pulmonary, GI, and musculoskeletal etiologies.';
            
            response.differentialDiagnosis = [
                'Acute coronary syndrome (unstable angina/NSTEMI/STEMI)',
                'Stable angina pectoris',
                'Pulmonary embolism',
                'Aortic dissection',
                'Gastroesophageal reflux disease',
                'Costochondritis'
            ];
            
            response.recommendedTests = ['ECG', 'Cardiac troponins', 'Chest X-ray', 'D-dimer if PE suspected', 'Echocardiogram', 'Stress testing'];
            response.followUpGuidance = 'Immediate evaluation for acute symptoms, risk stratification for chronic symptoms';
            }
            
            else {
            response.clinicalAnalysis = `General health inquiry regarding: ${currentQuery}. Based on available patient data: ` +
                `Age ${userProfile.age}, BMI ${userProfile.bmi}, known conditions: ${medicalData.conditions.map(c => c.name).join(', ') || 'none'}. ` +
                healthInsights.overallAssessment;
            
            response.followUpGuidance = 'Recommend comprehensive history and physical examination with appropriate specialist referral as indicated.';
            }
            
            setConsultations(prev => [{ ...response, id: Date.now() }, ...prev]);
            setCurrentQuery('');
        };

        return (
            <div className="min-h-screen bg-gray-50">
            {/* Header */}
            <div className="bg-white shadow-lg border-b">
                <div className="max-w-7xl mx-auto px-6 py-4">
                <div className="flex items-center justify-between">
                    <div className="flex items-center">
                    <Brain className="text-blue-600 mr-3" size={32} />
                    <div>
                        <h1 className="text-2xl font-bold text-gray-900">HealthAdvisor Pro</h1>
                        <p className="text-sm text-gray-600">Evidence-Based Clinical Decision Support</p>
                    </div>
                    </div>
                    <div className="flex items-center space-x-4">
                    <div className="flex items-center">
                        <div className="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-2">
                        <span className="text-white font-bold">{userProfile.initials || 'U'}</span>
                        </div>
                        <div className="text-sm">
                        <div className="font-medium">{userProfile.initials || 'User'}</div>
                        <div className="text-gray-500">Patient Profile</div>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
            </div>

            {/* Navigation */}
            <div className="bg-white border-b">
                <div className="max-w-7xl mx-auto px-6">
                <nav className="flex space-x-8">
                    {[
                    { id: 'dashboard', label: 'Clinical Dashboard', icon: TrendingUp },
                    { id: 'profile', label: 'Patient Profile', icon: User },
                    { id: 'vitals', label: 'Labs & Vitals', icon: Activity },
                    { id: 'conditions', label: 'Medical History', icon: FileText },
                    { id: 'consultation', label: 'AI Consultation', icon: Brain }
                    ].map(nav => (
                    <button
                        key={nav.id}
                        onClick={() => setCurrentView(nav.id)}
                        className={`py-4 px-2 border-b-2 font-medium text-sm flex items-center ${
                        currentView === nav.id
                            ? 'border-blue-500 text-blue-600'
                            : 'border-transparent text-gray-500 hover:text-gray-700'
                        }`}
                    >
                        <nav.icon className="mr-2" size={18} />
                        {nav.label}
                    </button>
                    ))}
                </nav>
                </div>
            </div>

            {/* Main Content */}
            <div className="max-w-7xl mx-auto px-6 py-8">
                {currentView === 'dashboard' && (
                <div className="space-y-6">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    {/* Cardiovascular Risk */}
                    <div className="bg-white rounded-lg shadow p-6">
                        <div className="flex items-center mb-4">
                        <Heart className="text-red-500 mr-2" size={24} />
                        <h3 className="text-lg font-semibold">Cardiovascular Risk</h3>
                        </div>
                        {healthInsights.cardiovascularRisk ? (
                        <div>
                            <div className={`text-2xl font-bold mb-2 ${
                            healthInsights.cardiovascularRisk.riskLevel === 'High' ? 'text-red-600' :
                            healthInsights.cardiovascularRisk.riskLevel === 'Moderate' ? 'text-yellow-600' : 'text-green-600'
                            }`}>
                            {healthInsights.cardiovascularRisk.riskLevel} Risk
                            </div>
                            <div className="text-sm text-gray-600 mb-3">
                            Risk Score: {healthInsights.cardiovascularRisk.riskScore}/10
                            </div>
                            <div className="space-y-1">
                            {healthInsights.cardiovascularRisk.riskFactors.map((factor, idx) => (
                                <div key={idx} className="text-xs bg-gray-100 px-2 py-1 rounded">{factor}</div>
                            ))}
                            </div>
                        </div>
                        ) : (
                        <p className="text-gray-500">Insufficient data for assessment</p>
                        )}
                    </div>

                    {/* Diabetic Risk */}
                    <div className="bg-white rounded-lg shadow p-6">
                        <div className="flex items-center mb-4">
                        <Target className="text-blue-500 mr-2" size={24} />
                        <h3 className="text-lg font-semibold">Diabetes Assessment</h3>
                        </div>
                        {healthInsights.diabeticRisk ? (
                        <div>
                            <div className={`text-lg font-bold mb-2 ${
                            healthInsights.diabeticRisk.status?.includes('Diabetes') ? 'text-red-600' :
                            healthInsights.diabeticRisk.riskFactors?.length > 2 ? 'text-yellow-600' : 'text-green-600'
                            }`}>
                            {healthInsights.diabeticRisk.status}
                            </div>
                            {healthInsights.diabeticRisk.riskFactors?.length > 0 && (
                            <div className="space-y-1">
                                {healthInsights.diabeticRisk.riskFactors.map((factor, idx) => (
                                <div key={idx} className="text-xs bg-gray-100 px-2 py-1 rounded">{factor}</div>
                                ))}
                            </div>
                            )}
                        </div>
                        ) : (
                        <p className="text-gray-500">Enter BMI and/or HbA1c for assessment</p>
                        )}
                    </div>

                    {/* Overall Assessment */}
                    <div className="bg-white rounded-lg shadow p-6">
                        <div className="flex items-center mb-4">
                        <Brain className="text-purple-500 mr-2" size={24} />
                        <h3 className="text-lg font-semibold">Clinical Summary</h3>
                        </div>
                        <p className="text-sm text-gray-700 mb-4">{healthInsights.overallAssessment}</p>
                        {healthInsights.priorityRecommendations.length > 0 && (
                        <div className="space-y-1">
                            <div className="font-medium text-sm">Priority Actions:</div>
                            {healthInsights.priorityRecommendations.map((rec, idx) => (
                            <div key={idx} className="text-xs bg-blue-50 px-2 py-1 rounded text-blue-800">{rec}</div>
                            ))}
                        </div>
                        )}
                    </div>
                    </div>

                    {/* Symptom Analysis */}
                    {healthInsights.symptomAnalyses.length > 0 && (
                    <div className="bg-white rounded-lg shadow p-6">
                        <h3 className="text-lg font-semibold mb-4 flex items-center">
                        <AlertTriangle className="text-orange-500 mr-2" size={24} />
                        Symptom Analysis
                        </h3>
                        <div className="space-y-4">
                        {healthInsights.symptomAnalyses.map((analysis, idx) => (
                            <div key={idx} className="border-l-4 border-orange-400 pl-4">
                            <div className="font-medium mb-2">{analysis.symptom}</div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                <div>
                                <div className="font-medium text-gray-700 mb-1">Possible Causes:</div>
                                {analysis.possibleCauses.map((cause, i) => (
                                    <div key={i} className="text-gray-600">{cause}</div>
                                ))}
                                </div>
                                <div>
                                <div className="font-medium text-red-700 mb-1">Red Flags:</div>
                                {analysis.redFlags.map((flag, i) => (
                                    <div key={i} className="text-red-600">{flag}</div>
                                ))}
                                </div>
                                <div>
                                <div className="font-medium text-blue-700 mb-1">Recommendations:</div>
                                {analysis.recommendations.map((rec, i) => (
                                    <div key={i} className="text-blue-600">{rec}</div>
                                ))}
                                </div>
                            </div>
                            </div>
                        ))}
                        </div>
                    </div>
                    )}
                </div>
                )}

                {currentView === 'consultation' && (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                    <h3 className="text-xl font-semibold mb-4 flex items-center">
                        <Brain className="text-purple-600 mr-2" size={24} />
                        AI Clinical Consultation
                    </h3>
                    <div className="flex space-x-4">
                        <input
                        type="text"
                        value={currentQuery}
                        onChange={(e) => setCurrentQuery(e.target.value)}
                        placeholder="Ask about diagnosis, treatment options, test interpretation, clinical guidelines..."
                        className="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        onKeyPress={(e) => e.key === 'Enter' && generateConsultation()}
                        />
                        <button
                        onClick={generateConsultation}
                        className="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 flex items-center"
                        >
                        <Search className="mr-2" size={18} />
                        Consult
                        </button>
                    </div>
                    <div className="mt-4 p-4 bg-amber-50 border-l-4 border-amber-400 rounded">
                        <div className="flex items-center">
                        <AlertTriangle className="text-amber-600 mr-2" size={18} />
                        <p className="text-sm text-amber-800">
                            <strong>Clinical Decision Support:</strong> This AI provides evidence-based analysis for educational purposes. 
                            Always verify recommendations with current clinical guidelines and use professional medical judgment.
                        </p>
                        </div>
                    </div>
                    </div>

                    {consultations.length > 0 && (
                    <div className="space-y-6">
                        {consultations.map(consultation => (
                        <div key={consultation.id} className="bg-white rounded-lg shadow p-6">
                            <div className="border-l-4 border-purple-400 pl-4">
                            <div className="font-semibold text-lg mb-3">Q: {consultation.question}</div>
                            
                            <div className="space-y-4">
                                <div>
                                <h4 className="font-medium text-gray-800 mb-2">Clinical Analysis:</h4>
                                <p className="text-gray-700">{consultation.clinicalAnalysis}</p>
                                </div>
                                
                                {consultation.differentialDiagnosis.length > 0 && (
                                <div>
                                    <h4 className="font-medium text-gray-800 mb-2">Differential Diagnosis:</h4>
                                    <ul className="list-disc list-inside text-gray-700 space-y-1">
                                    {consultation.differentialDiagnosis.map((dx, idx) => (
                                        <li key={idx}>{dx}</li>
                                    ))}
                                    </ul>
                                </div>
                                )}
                                
                                {consultation.recommendedTests.length > 0 && (
                                <div>
                                    <h4 className="font-medium text-gray-800 mb-2">Recommended Tests:</h4>
                                    <div className="flex flex-wrap gap-2">
                                    {consultation.recommendedTests.map((test, idx) => (
                                        <span key={idx} className="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">{test}</span>
                                    ))}
                                    </div>
                                </div>
                                )}
                                
                                {consultation.treatmentOptions.length > 0 && (
                                <div>
                                    <h4 className="font-medium text-gray-800 mb-2">Treatment Options:</h4>
                                    <ul className="list-disc list-inside text-gray-700 space-y-1">
                                    {consultation.treatmentOptions.map((treatment, idx) => (
                                        <li key={idx}>{treatment}</li>
                                    ))}
                                    </ul>
                                </div>
                                )}
                                
                                <div>
                                <h4 className="font-medium text-gray-800 mb-2">Follow-up Guidance:</h4>
                                <p className="text-gray-700">{consultation.followUpGuidance}</p>
                                </div>
                                
                                <div className="flex justify-between items-center pt-3 border-t text-sm text-gray-500">
                                <span>Evidence Level: {consultation.evidenceLevel}</span>
                                <span>{consultation.timestamp}</span>
                                </div>
                            </div>
                            </div>
                        </div>
                        ))}
                    </div>
                    )}
                </div>
                )}


                {currentView === 'conditions' && (
                <div className="space-y-6">
                    {['conditions', 'medications', 'allergies', 'symptoms'].map(category => (
                    <div key={category} className="bg-white rounded-lg shadow p-6">
                        <div className="flex justify-between items-center mb-4">
                        <h3 className="text-lg font-semibold capitalize">{category}</h3>
                        <button
                            onClick={() => setShowAddForms(prev => ({ ...prev, [category]: !prev[category] }))}
                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center"
                        >
                            <Plus size={18} className="mr-1" />
                            Add {category.slice(0, -1)}
                        </button>
                        </div>
                        
                        {showAddForms[category] && (
                        <div className="mb-4 p-4 bg-gray-50 rounded-lg">
                            <input
                            type="text"
                            placeholder={`Enter ${category.slice(0, -1)}...`}
                            className="w-full p-2 border rounded-md mb-2 focus:ring-2 focus:ring-blue-500"
                            onKeyDown={(e) => {
                                if (e.key === 'Enter') {
                                addMedicalItem(category, e.target.value);
                                e.target.value = '';
                                setShowAddForms(prev => ({ ...prev, [category]: false }));
                                }
                            }}
                            />
                            <div className="flex gap-2">
                            <button
                                onClick={(e) => {
                                const input = e.target.parentElement.previousElementSibling;
                                addMedicalItem(category, input.value);
                                input.value = '';
                                setShowAddForms(prev => ({ ...prev, [category]: false }));
                                }}
                                className="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700"
                            >
                                Save
                            </button>
                            <button
                                onClick={() => setShowAddForms(prev => ({ ...prev, [category]: false }))}
                                className="bg-gray-400 text-white px-3 py-1 rounded hover:bg-gray-500"
                            >
                                Cancel
                            </button>
                            </div>
                        </div>
                        )}
                        
                        <div className="space-y-2">
                        {medicalData[category].length === 0 ? (
                            <p className="text-gray-500 italic">No {category} recorded</p>
                        ) : (
                            medicalData[category].map(item => (
                            <div key={item.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                <span className="font-medium">{item.name}</span>
                                <span className="text-gray-500 text-sm ml-2">Added: {item.dateAdded}</span>
                                </div>
                                <button
                                onClick={() => setMedicalData(prev => ({
                                    ...prev,
                                    [category]: prev[category].filter(i => i.id !== item.id)
                                }))}
                                className="text-red-600 hover:text-red-800"
                                >
                                Remove
                                </button>
                            </div>
                            ))
                        )}
                        </div>
                    </div>
                    ))}
                </div>
                )}
            </div>
            </div>
        );};
        export default HealthAdvisorPro;
    </script>
  </body>
</html>
